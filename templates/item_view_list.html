{% load i18n %}
{% load humanize %}

<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
	<meta charset="utf-8">
	<script src="/media/js/jquery-1.8.1.js"></script>
	<script src="/media/js/fixbar.js"></script>
	<script src="/media/js/checkbox.js"></script>
	<link href="/media/css/common.css" rel="stylesheet" type="text/css">
	<link href="/media/css/widgets/buttons.css" rel="stylesheet" type="text/css">
	<link href="/media/css/widgets/lists.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/media/fonts/heydings-controls/stylesheet.css" type="text/css" charset="utf-8">
	<link rel="stylesheet" href="/media/fonts/heydings-common-icons/stylesheet.css" type="text/css" charset="utf-8">
	<link href="/media/favicon.ico" rel="shortcut icon">
	<title>FP - {{ client.name }} - {{ job.name}} - {{item.name}} - Page List</title>
</head>


<body>
	<div class="debug">--</div>
	<div id="topbar">
		<ul>
			<li> <a href="/{{ client.pk }}/">{{ client.name }}</a> </li>
			<li> <a href="/{{ client.pk }}/{{ job.pk }}/">{{ job.name }}</a> </li>
			<li> {{ item.name }} </li>
			<li> Page List </li>
		</ul>
	</div>

	<div id="control_bar">
		<div class="btn_box_center">
			<a href="/{{ client.pk }}/{{ job.pk }}/{{ item.pk }}/thumbs/"><div class="btn btnM btnH left"> <div class="btn_icon btn_icon2">k</div> Thumbs </div></a>
			<div class="btn btnM btnH middle pushed"> <div class="btn_icon btn_icon1">5</div> List </div>
			<div class="btn btnM btnH right"> <div class="btn_icon btn_icon2">G</div> Configure </div>
			<a href="/{{ client.pk }}/{{ job.pk }}/{{ item.pk }}/file_upload/"><div class="btn btnM btnH add"> <div class="btn_icon btn_icon2">+</div> Upload Pages </div></a>
			{% if pages %}
				<div class="btn btnM btnH delete"> <div class="btn_icon btn_icon1">X</div> Delete Pages </div>
			{% endif %}
		</div>
		
		<div class="help">
			{{ item.page_set.count }} total page{{ item.page_set.count|pluralize }}:
			<span class="legend ok"> </span> {{ item.approved }} page{{ item.approved|pluralize }} approved
			<span class="legend pending"> </span> {{ item.pending }} page{{ item.pending|pluralize }} pending
			<span class="legend rejected"> </span> {{ item.rejected }} page{{ item.rejected|pluralize }} rejected
		</div>
	</div>
	
	<div id="view">
		<div class="list_header">
			<ul>  
				<li class="checkbox">
					<input type="checkbox" class="checkall" id="master_bookmark">
					<label class="bookmark" for="master_bookmark"></label>
				</li>
				<li class="page twolines">Page <br>(absolute)</li>
				<li class="comments">Comments</li>
				<li class="revisions">Revisions</li>
				<li class="status">Status</li>
				<li class="updated">Last review</li>
				<li class="added">First added</li>
			</ul>
		</div>
		
		<div class="list_container">
			{% if pages %}
				{% for page in pages %}
				<ul>
					<li class="checkbox">
						<input type="checkbox" name="{{ page.abs_num }}" value="{{ page.abs_num }}" id="{{ page.abs_num }}"/>
						<label class="bookmark" for="{{ page.abs_num }}">mark page</label>
					</li>
					<li class="page"> 
						<a href="/{{ client.pk }}/{{ job.pk }}/{{ item.pk }}/{{ page.rel_num }}/"><span class="btn_inline btn_icon1">V</span> {{ page.rel_num }} ({{ page.abs_num }})</a> 
					</li>
					<li class="comments">{{ page.last_rev.comment_set.count }}</li>
					<li class="revisions">{{ page.revision_set.count }}</li>
					<li class="status {{ page.last_rev.status|lower }}">{{ page.last_rev.status }}</li>
					<li class="updated twolines">{{ page.last_rev.creation|naturaltime }}<br>(on {{ page.last_rev.creation|date:"D j M y, H:i" }})</li>
					<li class="added twolines">{{ job.creation|naturaltime }}<br>(on {{ job.creation|date:"D j M y, H:i" }})</li>
				</ul>
			{% endfor %}
			{% else %}
				<p>No pages are available.</p>
			{% endif %}
		</div>			
	</div>
</body>
</html>
